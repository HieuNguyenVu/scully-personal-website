<!doctype html><html lang="en"><head><meta name="generator" content="Scully 1.1.1"><meta charset="utf-8"><meta name="description" content="Vài tháng trước mình vừa nhận một hoá đơn hơn 200$ từ AWS chỉ vì quên cmn tắt 2 cái services demo khi phỏng vấn tìm việc. Quá xót tiền, vậy là 1 con đỗ nghèo khỉ như mình lại tìm đường quay về mặt đất. Một phần cũng vì tò mò những hệ thống on-premise trước giờ họ deploy và public ra như thế nào."><meta name="og:url" content="/blog/on-the-ground"><meta name="og:site_name" property="og:site_name" content="Hieu NguyenVu - Portfolio"><meta name="og:title" property="og:title" content="[TIL] On The Ground"><meta name="og:type" property="og:type" content="article"><meta http-equiv="content-language" content="en"><meta name="viewport" content="width=device-width,initial-scale=1"><title>[TIL]　On The Ground</title><base href="/"><link rel="icon" type="image/png" href="assets/icons/favicon-196x196.png" sizes="196x196"><link rel="icon" type="image/png" href="assets/icons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="assets/icons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="assets/icons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="assets/icons/favicon-128x128.png" sizes="128x128"><link rel="preconnect" href="https://fonts.gstatic.com"><style>@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Roboto;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style>@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5JCh01uHN-poF.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jih01uHN-poF.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jyh01uHN-poF.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:300;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5KSh01uHN-g.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5JCh01uHN-poF.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jih01uHN-poF.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jyh01uHN-poF.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5KSh01uHN-g.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5JCh01uHN-poF.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jih01uHN-poF.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jyh01uHN-poF.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:500;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5KSh01uHN-g.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:600;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5JCh01uHN-poF.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:600;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jih01uHN-poF.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:600;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5Jyh01uHN-poF.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto Serif';font-style:normal;font-weight:600;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/robotoserif/v8/R70mjywflP6FLr3gZx7K8UyuXDs9zVwDmXCb8lxYgmuii32UGoVldX6UgfjL4-3sMM_kB_qXSEX5KSh01uHN-g.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style><style>@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/materialicons/v139/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}</style><link rel="stylesheet" href="assets/images/icon_sets.svg"><link rel="preload" href="assets/configs/portfolio.json" as="fetch"><link rel="manifest" href="manifest.webmanifest"><meta name="theme-color" content="#1976d2"><link rel="preconnect" href="https://www.googletagmanager.com"><script async src="https://www.googletagmanager.com/gtag/js?id=G-M87K7ESMCZ"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-M87K7ESMCZ")</script><link rel="stylesheet" href="styles.a9700015d18d4b3096e8.css"><script charset="utf-8" src="1.df7d375542c481ddc0f1.js"></script><script charset="utf-8" src="5.23b422c7f0d6c98001e9.js"></script><style></style><style>#mainTab{height:48px;display:flex;align-items:center;justify-content:center;position:sticky;top:0;background-color:#fff;z-index:1000;border-bottom:1px solid rgba(0,113,123,.3)}#mainTab a{font-size:14px;font-weight:500;text-decoration:none}#mainTab>div{min-width:160px;display:flex;justify-content:center;align-items:center;opacity:.7}#mainTab>div:nth-last-child(1){height:46px;border-bottom:2px solid #00717b;opacity:1}#mainTab>div:nth-last-child(1) a{padding-top:2px}#blog-post{margin-top:0;border-top:0}#blog-post .avatar{width:26px;height:26px;display:inline-block;border-radius:50%}#blog-post .inner-bounds{padding:0}#blog-post .header-image{height:400px;width:100%;display:block;margin-bottom:3rem;overflow:hidden;background-color:#fff}#blog-post .header-image img{object-fit:cover;width:100%;height:100%}#blog-post .content{padding:0}#blog-post figcaption{font-style:italic}#blog-post app-footer{padding:0 5rem;display:block}img[src$=centerme]{display:block;margin:0 auto}.container-wrapper{display:flex}.container-wrapper .control-container{width:100%;max-width:15%;min-width:60px}.container-wrapper .content-container{display:flex;width:100%;overflow-y:auto}.container-wrapper .content-container .bounds#blog-post{width:70%;height:calc(100vh - 50px);overflow-y:auto}.container-wrapper .content-container .bounds#blog-post .suggest-share-container.right-container{display:none;height:auto}.container-wrapper .content-container .bounds#blog-post .suggest-share-container.right-container>div{width:100%!important}.container-wrapper .content-container .bounds#blog-post .suggest-share-container.right-container .share-btn{transform:scale(.8)}.container-wrapper .content-container .suggest-share-container{width:30%;height:calc(100vh - 50px);overflow-y:auto;min-width:360px}.container-wrapper .content-container .suggest-share-container .share-container,.container-wrapper .content-container .suggest-share-container .suggest-container{height:auto;width:350px;margin-left:auto;margin-right:auto}.container-wrapper .content-container .suggest-share-container .share-container{margin-top:20px}.container-wrapper .content-container .suggest-share-container.right-container{border-right:0;border-top-right-radius:0;border-bottom-right-radius:0;height:calc(100vh - 50px)}.container-wrapper .content-container .suggest-share-container.right-container .share-container .menu{position:initial;width:100%;display:flex;justify-content:center}.container-wrapper .content-container .suggest-share-container.right-container .share-container .share-btn{width:100px;height:40px;border-radius:30px;border:1px solid #00717b;background-color:#00717b;margin:auto}.container-wrapper .content-container .suggest-share-container.right-container .share-container .share-btn div{width:50px;height:50px;transform:scale(.6);margin:auto;position:relative;bottom:7px}.container-wrapper .content-container .suggest-share-container.right-container .share-container .share-btn:hover{background-color:#fff}.container-wrapper .content-container .suggest-share-container.right-container .share-container .menu .m-icon{margin:0 10px}.container-wrapper .content-container .suggest-share-container.right-container .share-container .share-des{margin-top:15px;display:block;text-align:center}.container-wrapper .content-container .suggest-share-container.right-container .recommended .rtitle,.container-wrapper .content-container .suggest-share-container.right-container .share-container .sharetitle,.container-wrapper .content-container .suggest-share-container.right-container .suggest-items .stitle{font-weight:600;margin-bottom:10px;display:block}.container-wrapper .content-container .suggest-share-container.right-container .share-container{margin-bottom:20px}.container-wrapper .content-container .suggest-share-container.right-container .suggest-items{border-top:1px solid #add8e6;padding-top:20px}.container-wrapper .content-container .suggest-share-container.right-container .recommended{margin-top:20px;border-top:1px solid #add8e6;padding-top:20px;padding-left:5px}.container-wrapper .content-container .suggest-share-container.right-container .recommended .tags{line-height:1;margin-bottom:5px}.container-wrapper .content-container .suggest-share-container.right-container .recommended .tags .tag-item{display:inline-block;background-color:#0f9d5830;border:1px solid #0f9d5830;margin:2.5px 2.5px;border-radius:30px;padding:7px 10px;min-width:50px;text-align:center}.container-wrapper .content-container .suggest-share-container.right-container .recommended .tags a{text-decoration:none}.container-wrapper .content-container .suggest-share-container.right-container .recommended .tags a:hover{color:#f29e03!important}.bounds#blog-post{box-shadow:none!important;margin-left:5px;margin-bottom:0;border-radius:0}.left-container{border-right:1px solid rgba(0,113,123,.3)}.left-container{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0;display:flex;flex-direction:column;height:calc(100vh - 50px)!important;top:50px}.left-container .logo{text-align:right}.left-container .logo img{transform:scale(.8);width:50px;height:50px;margin-right:5px;margin-top:5px}.left-container .menu-left{transform:scale(.6);margin-left:auto;height:100%;width:60px;opacity:.6;transition:opacity 1s}.left-container .menu-left button{display:inline-block;width:50px;height:50px;margin-left:5px;margin-bottom:10px;margin-top:10px}.left-container .menu-left .top{transform:rotate(180deg);opacity:.3;margin-bottom:50px}.left-container .menu-left .bottom{margin-top:50px;opacity:.3}.left-container .menu-left .bottom:hover,.left-container .menu-left .top:hover{opacity:1}.left-container .menu-left .top:active{transform:scale(.95) rotate(180deg)}.left-container .menu-left .bottom:active{transform:scale(.95)}.left-container .menu-left:hover{opacity:1;transition:opacity 1s}.left-container .menu-left:hover .shake:hover{animation:shake .3s}.left-container .menu-left:hover button.shake:active{transform:scale(.96)}.left-container .footer{bottom:10px;width:100%;text-align:right}.left-container .footer .m-icon{width:50px;height:50px;margin-right:10px;transform:scale(.8)}.bounds#blog-post .inner-bounds{width:100%}.bounds#blog-post .inner-bounds .content{margin-bottom:40px}.bounds#blog-post .post-container{max-width:850px;margin:auto}.bounds#blog-post .header{font-weight:500!important;margin-left:auto;margin-right:auto;font-size:40px!important}.bounds#blog-post .header span:first-child{margin-right:0}.bounds#blog-post .main-content{margin-top:0;margin-bottom:50px;max-width:100%!important}.bounds#blog-post .main-content>div{justify-content:center;width:100%}.bounds#blog-post .main-content .yellow-line{width:50px;height:20px;border-bottom:3px solid #f29e03;margin-bottom:50px}.bounds#blog-post .main-content .s-content{min-height:350px}.bounds#blog-post .main-content .s-content>p{font-family:Roboto!important}.bounds#blog-post .main-content ol li{font-family:Roboto!important}.bounds#blog-post .main-content .post-date{text-align:right}.bounds#blog-post .main-content .post-thank{text-align:right;font-style:italic;padding-right:30px}.bounds#blog-post label.author{font-size:20px;font-weight:500;display:flex;align-items:center;margin-top:15px}.bounds#blog-post label.author>span{margin-left:5px;text-align:left;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.bounds#blog-post label.author .normal{font-weight:400}@media screen and (max-width:1280px){.container-wrapper .control-container{max-width:60px}.container-wrapper .control-container .footer button{margin-right:5px}}@media screen and (max-width:920px){.content-container{flex-direction:column}.content-container .bounds#blog-post{width:calc(100% - 5px)!important}.content-container .bounds#blog-post .suggest-share-container.right-container{width:calc(100% - 5px)!important;display:block!important}.content-container .suggest-share-container.right-container{width:calc(100% - 5px)!important;display:none}}@media screen and (max-width:1500px){.bounds#blog-post .header{padding:0 10px!important;justify-content:left}.markdown-body{margin-left:10px!important;margin-right:10px!important}}@media screen and (max-width:640px){.bounds#blog-post .header{font-size:35px!important}}@media screen and (max-width:520px){.bounds#blog-post .header{font-size:30px!important}.suggest-share-container{min-width:unset!important}#mainTab>div{min-width:72px;padding:0 16px}}@media screen and (max-width:520px){#mainTab{height:35px}#mainTab div{height:35px!important}.container-wrapper{flex-direction:column-reverse}.left-container{min-width:30px!important;max-width:100%!important;flex-direction:row;height:30px!important;align-items:center;background-color:#fff!important;border-top:1px solid rgba(0,113,123,.3);position:fixed;bottom:0;top:unset}.left-container .menu-left{width:100%;transform:scale(.5);display:flex;align-items:center;justify-content:space-between}.left-container .menu-left .arrow{display:none}.left-container .menu-left button{margin-top:0;margin-bottom:0}.left-container button{margin-left:0!important;margin-right:0!important}.left-container .footer{width:50px;height:30px;display:flex;justify-content:center;align-items:center}.left-container .footer .m-icon{transform:scale(.5)}.left-container .logo{display:flex;justify-content:center;align-items:center;width:50px;height:30px}.left-container .logo img{transform:scale(.5);margin-right:0!important}.bounds#blog-post{margin-left:0!important;margin-right:0!important;min-width:100%!important;height:calc(100vh - 67px)!important}.right-container{margin:0 auto}::-webkit-scrollbar-track{border-left:0}}::-webkit-scrollbar-track{background:rgba(0,0,0,0);border-left:1px solid rgba(0,113,123,.3)}::-webkit-scrollbar-thumb{background:#00717b75;border-radius:5px}::-webkit-scrollbar-thumb:hover{background:#00717bcb}</style><style>div.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;top:.3em;right:.2em;transition:opacity .3s ease-in-out;opacity:0}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar:focus-within>.toolbar{opacity:1}div.code-toolbar>.toolbar>.toolbar-item{display:inline-block}div.code-toolbar>.toolbar>.toolbar-item>a{cursor:pointer}div.code-toolbar>.toolbar>.toolbar-item>button{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar>.toolbar-item>span{color:#bbb;font-size:.8em;padding:0 .5em;background:#f5f2f0;background:rgba(224,224,224,.2);box-shadow:0 2px 0 0 rgba(0,0,0,.2);border-radius:.5em}div.code-toolbar>.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar>.toolbar-item>span:hover{color:inherit;text-decoration:none}#blog-post.bounds .markdown-body .octicon{display:inline-block!important;fill:currentColor!important;vertical-align:text-bottom!important}#blog-post.bounds .markdown-body .anchor{float:left!important;line-height:1!important;margin-left:-20px!important;padding-right:4px!important}#blog-post.bounds .markdown-body .anchor:focus{outline:0!important}#blog-post.bounds .markdown-body h1 .octicon-link,#blog-post.bounds .markdown-body h2 .octicon-link,#blog-post.bounds .markdown-body h3 .octicon-link,#blog-post.bounds .markdown-body h4 .octicon-link,#blog-post.bounds .markdown-body h5 .octicon-link,#blog-post.bounds .markdown-body h6 .octicon-link{color:#1b1f23!important;vertical-align:middle!important;visibility:hidden!important}#blog-post.bounds .markdown-body h1:hover .anchor,#blog-post.bounds .markdown-body h2:hover .anchor,#blog-post.bounds .markdown-body h3:hover .anchor,#blog-post.bounds .markdown-body h4:hover .anchor,#blog-post.bounds .markdown-body h5:hover .anchor,#blog-post.bounds .markdown-body h6:hover .anchor{text-decoration:none!important}#blog-post.bounds .markdown-body h1:hover .anchor .octicon-link,#blog-post.bounds .markdown-body h2:hover .anchor .octicon-link,#blog-post.bounds .markdown-body h3:hover .anchor .octicon-link,#blog-post.bounds .markdown-body h4:hover .anchor .octicon-link,#blog-post.bounds .markdown-body h5:hover .anchor .octicon-link,#blog-post.bounds .markdown-body h6:hover .anchor .octicon-link{visibility:visible!important}#blog-post.bounds .markdown-body h1:hover .anchor .octicon-link:before,#blog-post.bounds .markdown-body h2:hover .anchor .octicon-link:before,#blog-post.bounds .markdown-body h3:hover .anchor .octicon-link:before,#blog-post.bounds .markdown-body h4:hover .anchor .octicon-link:before,#blog-post.bounds .markdown-body h5:hover .anchor .octicon-link:before,#blog-post.bounds .markdown-body h6:hover .anchor .octicon-link:before{width:16px!important;height:16px!important;content:" "!important;display:inline-block!important;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'%3E%3C/path%3E%3C/svg%3E")!important}#blog-post.bounds .markdown-body{-ms-text-size-adjust:100%!important;-webkit-text-size-adjust:100%!important;color:#24292e!important;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji!important;word-wrap:break-word!important}#blog-post.bounds .markdown-body details{display:block!important}#blog-post.bounds .markdown-body summary{display:list-item!important}#blog-post.bounds .markdown-body a{background-color:initial!important}#blog-post.bounds .markdown-body a:active,#blog-post.bounds .markdown-body a:hover{outline-width:0!important}#blog-post.bounds .markdown-body strong{font-weight:inherit!important;font-weight:bolder!important}#blog-post.bounds .markdown-body h1{font-size:2em!important;margin:.67em 0!important}#blog-post.bounds .markdown-body img{border-style:none!important}#blog-post.bounds .markdown-body code,#blog-post.bounds .markdown-body kbd,#blog-post.bounds .markdown-body pre{font-family:monospace,monospace!important;font-size:1em!important}#blog-post.bounds .markdown-body hr{box-sizing:initial!important;height:0!important;overflow:visible!important}#blog-post.bounds .markdown-body input{font:inherit!important;margin:0!important}#blog-post.bounds .markdown-body input{overflow:visible!important}#blog-post.bounds .markdown-body [type=checkbox]{box-sizing:border-box!important;padding:0!important}#blog-post.bounds .markdown-body *{box-sizing:border-box!important}#blog-post.bounds .markdown-body input{font-family:inherit!important;font-size:inherit!important;line-height:inherit!important}#blog-post.bounds .markdown-body a,#blog-post.bounds .markdown-body a *{color:#0366d6!important;text-decoration:none!important}#blog-post.bounds .markdown-body a:hover{text-decoration:underline!important}#blog-post.bounds .markdown-body strong{font-weight:500!important;text-shadow:0 0 #333}#blog-post.bounds .markdown-body hr{height:0!important;margin:15px 0!important;overflow:hidden!important;background:0 0!important;border:0!important;border-bottom:1px solid #dfe2e5!important}#blog-post.bounds .markdown-body hr:after,#blog-post.bounds .markdown-body hr:before{display:table!important;content:""!important}#blog-post.bounds .markdown-body hr:after{clear:both!important}#blog-post.bounds .markdown-body table{border-spacing:0!important;border-collapse:collapse!important}#blog-post.bounds .markdown-body td,#blog-post.bounds .markdown-body th{padding:0!important}#blog-post.bounds .markdown-body details summary{cursor:pointer!important}#blog-post.bounds .markdown-body kbd{display:inline-block!important;padding:3px 5px!important;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;line-height:10px!important;color:#444d56!important;vertical-align:middle!important;background-color:#fafbfc!important;border:1px solid #d1d5da!important;border-radius:3px!important;box-shadow:inset 0 -1px 0 #d1d5da!important}#blog-post.bounds .markdown-body h1,#blog-post.bounds .markdown-body h2,#blog-post.bounds .markdown-body h3,#blog-post.bounds .markdown-body h4,#blog-post.bounds .markdown-body h5,#blog-post.bounds .markdown-body h6{margin-top:0!important;margin-bottom:0!important}#blog-post.bounds .markdown-body h1{font-size:32px!important}#blog-post.bounds .markdown-body h1,#blog-post.bounds .markdown-body h2{font-weight:600!important}#blog-post.bounds .markdown-body h2{font-size:24px!important}#blog-post.bounds .markdown-body h3{font-size:20px!important}#blog-post.bounds .markdown-body h3,#blog-post.bounds .markdown-body h4{font-weight:600!important}#blog-post.bounds .markdown-body h4{font-size:16px!important}#blog-post.bounds .markdown-body h5{font-size:14px!important}#blog-post.bounds .markdown-body h5,#blog-post.bounds .markdown-body h6{font-weight:600!important}#blog-post.bounds .markdown-body h6{font-size:12px!important}#blog-post.bounds .markdown-body p{margin-top:0!important;margin-bottom:10px!important}#blog-post.bounds .markdown-body blockquote{margin:0!important}#blog-post.bounds .markdown-body ol,#blog-post.bounds .markdown-body ul{padding-left:0!important;margin-top:0!important;margin-bottom:0!important}#blog-post.bounds .markdown-body ol ol,#blog-post.bounds .markdown-body ul ol{list-style-type:lower-roman!important}#blog-post.bounds .markdown-body ol ol ol,#blog-post.bounds .markdown-body ol ul ol,#blog-post.bounds .markdown-body ul ol ol,#blog-post.bounds .markdown-body ul ul ol{list-style-type:lower-alpha!important}#blog-post.bounds .markdown-body dd{margin-left:0!important}#blog-post.bounds .markdown-body code,#blog-post.bounds .markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;font-size:12px!important}#blog-post.bounds .markdown-body pre{margin-top:0!important;margin-bottom:0!important}#blog-post.bounds .markdown-body input::-webkit-inner-spin-button,#blog-post.bounds .markdown-body input::-webkit-outer-spin-button{margin:0!important;-webkit-appearance:none!important;appearance:none!important}#blog-post.bounds .markdown-body :checked+.radio-label{position:relative!important;z-index:1!important;border-color:#0366d6!important}#blog-post.bounds .markdown-body .border{border:1px solid #e1e4e8!important}#blog-post.bounds .markdown-body .border-0{border:0!important}#blog-post.bounds .markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}#blog-post.bounds .markdown-body .rounded-1{border-radius:3px!important}#blog-post.bounds .markdown-body .bg-white{background-color:#fff!important}#blog-post.bounds .markdown-body .bg-gray-light{background-color:#fafbfc!important}#blog-post.bounds .markdown-body .text-gray-light{color:#6a737d!important}#blog-post.bounds .markdown-body .mb-0{margin-bottom:0!important}#blog-post.bounds .markdown-body .my-2{margin-top:8px!important;margin-bottom:8px!important}#blog-post.bounds .markdown-body .pl-0{padding-left:0!important}#blog-post.bounds .markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}#blog-post.bounds .markdown-body .pl-1{padding-left:4px!important}#blog-post.bounds .markdown-body .pl-2{padding-left:8px!important}#blog-post.bounds .markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}#blog-post.bounds .markdown-body .pl-3,#blog-post.bounds .markdown-body .px-3{padding-left:16px!important}#blog-post.bounds .markdown-body .px-3{padding-right:16px!important}#blog-post.bounds .markdown-body .pl-4{padding-left:24px!important}#blog-post.bounds .markdown-body .pl-5{padding-left:32px!important}#blog-post.bounds .markdown-body .pl-6{padding-left:40px!important}#blog-post.bounds .markdown-body .f6{font-size:12px!important}#blog-post.bounds .markdown-body .lh-condensed{line-height:1.25!important}#blog-post.bounds .markdown-body .text-bold{font-weight:600!important}#blog-post.bounds .markdown-body .pl-c{color:#6a737d!important}#blog-post.bounds .markdown-body .pl-c1,#blog-post.bounds .markdown-body .pl-s .pl-v{color:#005cc5!important}#blog-post.bounds .markdown-body .pl-e,#blog-post.bounds .markdown-body .pl-en{color:#6f42c1!important}#blog-post.bounds .markdown-body .pl-s .pl-s1,#blog-post.bounds .markdown-body .pl-smi{color:#24292e!important}#blog-post.bounds .markdown-body .pl-ent{color:#22863a!important}#blog-post.bounds .markdown-body .pl-k{color:#d73a49!important}#blog-post.bounds .markdown-body .pl-pds,#blog-post.bounds .markdown-body .pl-s,#blog-post.bounds .markdown-body .pl-s .pl-pse .pl-s1,#blog-post.bounds .markdown-body .pl-sr,#blog-post.bounds .markdown-body .pl-sr .pl-cce,#blog-post.bounds .markdown-body .pl-sr .pl-sra,#blog-post.bounds .markdown-body .pl-sr .pl-sre{color:#032f62!important}#blog-post.bounds .markdown-body .pl-smw,#blog-post.bounds .markdown-body .pl-v{color:#e36209!important}#blog-post.bounds .markdown-body .pl-bu{color:#b31d28!important}#blog-post.bounds .markdown-body .pl-ii{color:#fafbfc!important;background-color:#b31d28!important}#blog-post.bounds .markdown-body .pl-c2{color:#fafbfc!important;background-color:#d73a49!important}#blog-post.bounds .markdown-body .pl-c2:before{content:"^M"!important}#blog-post.bounds .markdown-body .pl-sr .pl-cce{font-weight:700!important;color:#22863a!important}#blog-post.bounds .markdown-body .pl-ml{color:#735c0f!important}#blog-post.bounds .markdown-body .pl-mh,#blog-post.bounds .markdown-body .pl-mh .pl-en,#blog-post.bounds .markdown-body .pl-ms{font-weight:700!important;color:#005cc5!important}#blog-post.bounds .markdown-body .pl-mi{font-style:italic!important;color:#24292e!important}#blog-post.bounds .markdown-body .pl-mb{font-weight:700!important;color:#24292e!important}#blog-post.bounds .markdown-body .pl-md{color:#b31d28!important;background-color:#ffeef0!important}#blog-post.bounds .markdown-body .pl-mi1{color:#22863a!important;background-color:#f0fff4!important}#blog-post.bounds .markdown-body .pl-mc{color:#e36209!important;background-color:#ffebda!important}#blog-post.bounds .markdown-body .pl-mi2{color:#f6f8fa!important;background-color:#005cc5!important}#blog-post.bounds .markdown-body .pl-mdr{font-weight:700!important;color:#6f42c1!important}#blog-post.bounds .markdown-body .pl-ba{color:#586069!important}#blog-post.bounds .markdown-body .pl-sg{color:#959da5!important}#blog-post.bounds .markdown-body .pl-corl{text-decoration:underline!important;color:#032f62!important}#blog-post.bounds .markdown-body .mb-0{margin-bottom:0!important}#blog-post.bounds .markdown-body .my-2{margin-bottom:8px!important}#blog-post.bounds .markdown-body .my-2{margin-top:8px!important}#blog-post.bounds .markdown-body .pl-0{padding-left:0!important}#blog-post.bounds .markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}#blog-post.bounds .markdown-body .pl-1{padding-left:4px!important}#blog-post.bounds .markdown-body .pl-2{padding-left:8px!important}#blog-post.bounds .markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}#blog-post.bounds .markdown-body .pl-3{padding-left:16px!important}#blog-post.bounds .markdown-body .pl-4{padding-left:24px!important}#blog-post.bounds .markdown-body .pl-5{padding-left:32px!important}#blog-post.bounds .markdown-body .pl-6{padding-left:40px!important}#blog-post.bounds .markdown-body .pl-7{padding-left:48px!important}#blog-post.bounds .markdown-body .pl-8{padding-left:64px!important}#blog-post.bounds .markdown-body .pl-9{padding-left:80px!important}#blog-post.bounds .markdown-body .pl-10{padding-left:96px!important}#blog-post.bounds .markdown-body .pl-11{padding-left:112px!important}#blog-post.bounds .markdown-body .pl-12{padding-left:128px!important}#blog-post.bounds .markdown-body hr{border-bottom-color:#eee!important}#blog-post.bounds .markdown-body kbd{display:inline-block!important;padding:3px 5px!important;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;line-height:10px!important;color:#444d56!important;vertical-align:middle!important;background-color:#fafbfc!important;border:1px solid #d1d5da!important;border-radius:3px!important;box-shadow:inset 0 -1px 0 #d1d5da!important}#blog-post.bounds .markdown-body:after,#blog-post.bounds .markdown-body:before{display:table!important;content:""!important}#blog-post.bounds .markdown-body:after{clear:both!important}#blog-post.bounds .markdown-body>:first-child{margin-top:0!important}#blog-post.bounds .markdown-body>:last-child{margin-bottom:0!important}#blog-post.bounds .markdown-body a:not([href]){color:inherit!important;text-decoration:none!important}#blog-post.bounds .markdown-body blockquote,#blog-post.bounds .markdown-body details,#blog-post.bounds .markdown-body dl,#blog-post.bounds .markdown-body ol,#blog-post.bounds .markdown-body p,#blog-post.bounds .markdown-body pre,#blog-post.bounds .markdown-body table,#blog-post.bounds .markdown-body ul{margin-top:0!important;margin-bottom:16px!important}#blog-post.bounds .markdown-body hr{height:.25em!important;padding:0!important;margin:24px 0!important;background-color:#e1e4e8!important;border:0!important}#blog-post.bounds .markdown-body blockquote{padding:0 1em!important;color:#6a737d!important;border-left:3px solid #f29e03!important;background-color:#fff!important;border-radius:4px!important;padding-top:5px!important;padding-bottom:5px!important}#blog-post.bounds .markdown-body blockquote p{color:#6a737d!important}#blog-post.bounds .markdown-body blockquote>:first-child{margin-top:0!important}#blog-post.bounds .markdown-body blockquote>:last-child{margin-bottom:0!important}#blog-post.bounds .markdown-body h1,#blog-post.bounds .markdown-body h2,#blog-post.bounds .markdown-body h3,#blog-post.bounds .markdown-body h4,#blog-post.bounds .markdown-body h5,#blog-post.bounds .markdown-body h6{margin-top:24px!important;margin-bottom:16px!important;font-weight:600!important;line-height:1.25!important}#blog-post.bounds .markdown-body h1{font-size:2em!important}#blog-post.bounds .markdown-body h1,#blog-post.bounds .markdown-body h2{padding-bottom:.3em!important;border-bottom:1px solid #eaecef!important}#blog-post.bounds .markdown-body h2{font-size:1.5em!important}#blog-post.bounds .markdown-body h3{font-size:1.25em!important}#blog-post.bounds .markdown-body h4{font-size:1em!important}#blog-post.bounds .markdown-body h5{font-size:.875em!important}#blog-post.bounds .markdown-body h6{font-size:.85em!important;color:#6a737d!important}#blog-post.bounds .markdown-body ol,#blog-post.bounds .markdown-body ul{padding-left:2em!important}#blog-post.bounds .markdown-body ol ol,#blog-post.bounds .markdown-body ol ul,#blog-post.bounds .markdown-body ul ol,#blog-post.bounds .markdown-body ul ul{margin-top:0!important;margin-bottom:0!important}#blog-post.bounds .markdown-body li{word-wrap:break-all!important}#blog-post.bounds .markdown-body li>p{margin-top:16px!important}#blog-post.bounds .markdown-body li+li{margin-top:.25em!important}#blog-post.bounds .markdown-body dl{padding:0!important}#blog-post.bounds .markdown-body dl dt{padding:0!important;margin-top:16px!important;font-size:1em!important;font-style:italic!important;font-weight:600!important}#blog-post.bounds .markdown-body dl dd{padding:0 16px!important;margin-bottom:16px!important}#blog-post.bounds .markdown-body table{display:block!important;width:100%!important;overflow:auto!important}#blog-post.bounds .markdown-body table th{font-weight:600!important}#blog-post.bounds .markdown-body table td,#blog-post.bounds .markdown-body table th{padding:6px 13px!important;border:1px solid #dfe2e5!important}#blog-post.bounds .markdown-body table tr{background-color:#fff!important;border-top:1px solid #c6cbd1!important}#blog-post.bounds .markdown-body table tr:nth-child(2n){background-color:#f6f8fa!important}#blog-post.bounds .markdown-body img{max-width:100%!important;box-sizing:initial!important;background-color:#fff!important;border-radius:5px!important}#blog-post.bounds .markdown-body img[align=right]{padding-left:20px!important}#blog-post.bounds .markdown-body img[align=left]{padding-right:20px!important}#blog-post.bounds .markdown-body code{padding:.2em .4em!important;margin:0!important;font-size:85%!important;background-color:rgba(27,31,35,.05)!important;border-radius:3px!important}#blog-post.bounds .markdown-body pre{word-wrap:normal!important}#blog-post.bounds .markdown-body pre>code{padding:0!important;margin:0!important;font-size:100%!important;word-break:normal!important;white-space:pre!important;background:0 0!important;border:0!important}#blog-post.bounds .markdown-body .highlight{margin-bottom:16px!important}#blog-post.bounds .markdown-body .highlight pre{margin-bottom:0!important;word-break:normal!important}#blog-post.bounds .markdown-body .highlight pre,#blog-post.bounds .markdown-body pre{padding:16px!important;overflow:auto!important;font-size:85%!important;line-height:1.45!important;background-color:#f6f8fa!important;border-radius:3px!important}#blog-post.bounds .markdown-body pre code{display:inline!important;max-width:auto!important;padding:0!important;margin:0!important;overflow:visible!important;line-height:inherit!important;word-wrap:normal!important;background-color:initial!important;border:0!important}#blog-post.bounds .markdown-body .commit-tease-sha{display:inline-block!important;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;font-size:90%!important;color:#444d56!important}#blog-post.bounds .markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5!important;border-color:#005cc5!important}#blog-post.bounds .markdown-body .blob-wrapper{overflow-x:auto!important;overflow-y:hidden!important}#blog-post.bounds .markdown-body .blob-wrapper-embedded{max-height:240px!important;overflow-y:auto!important}#blog-post.bounds .markdown-body .blob-num{width:1%!important;min-width:50px!important;padding-right:10px!important;padding-left:10px!important;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;font-size:12px!important;line-height:20px!important;color:rgba(27,31,35,.3)!important;text-align:right!important;white-space:nowrap!important;vertical-align:top!important;cursor:pointer!important;-webkit-user-select:none!important;user-select:none!important}#blog-post.bounds .markdown-body .blob-num:hover{color:rgba(27,31,35,.6)!important}#blog-post.bounds .markdown-body .blob-num:before{content:attr(data-line-number)!important}#blog-post.bounds .markdown-body .blob-code{position:relative!important;padding-right:10px!important;padding-left:10px!important;line-height:20px!important;vertical-align:top!important}#blog-post.bounds .markdown-body .blob-code-inner{overflow:visible!important;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace!important;font-size:12px!important;color:#24292e!important;word-wrap:normal!important;white-space:pre!important}#blog-post.bounds .markdown-body .pl-token.active,#blog-post.bounds .markdown-body .pl-token:hover{cursor:pointer!important;background:#ffea7f!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1!important;tab-size:1!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2!important;tab-size:2!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3!important;tab-size:3!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4!important;tab-size:4!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5!important;tab-size:5!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6!important;tab-size:6!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7!important;tab-size:7!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8!important;tab-size:8!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9!important;tab-size:9!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10!important;tab-size:10!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11!important;tab-size:11!important}#blog-post.bounds .markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12!important;tab-size:12!important}#blog-post.bounds .markdown-body .task-list-item{list-style-type:none!important}#blog-post.bounds .markdown-body .task-list-item+.task-list-item{margin-top:3px!important}#blog-post.bounds .markdown-body .task-list-item input{margin:0 .2em .25em -1.6em!important;vertical-align:middle!important}#blog-post.bounds p{text-align:justify!important}#blog-post.bounds .hljs{display:block!important;overflow-x:auto!important;padding:.5em!important;color:#333!important;background:#f8f8f8!important}#blog-post.bounds .hljs-comment,#blog-post.bounds .hljs-quote{color:#998!important;font-style:italic!important}#blog-post.bounds .hljs-keyword,#blog-post.bounds .hljs-selector-tag,#blog-post.bounds .hljs-subst{color:#333!important;font-weight:700!important}#blog-post.bounds .hljs-literal,#blog-post.bounds .hljs-number,#blog-post.bounds .hljs-tag .hljs-attr,#blog-post.bounds .hljs-template-variable,#blog-post.bounds .hljs-variable{color:teal!important}#blog-post.bounds .hljs-doctag,#blog-post.bounds .hljs-string{color:#d14!important}#blog-post.bounds .hljs-section,#blog-post.bounds .hljs-selector-id,#blog-post.bounds .hljs-title{color:#900!important;font-weight:700!important}#blog-post.bounds .hljs-subst{font-weight:400!important}#blog-post.bounds .hljs-class .hljs-title,#blog-post.bounds .hljs-type{color:#458!important;font-weight:700!important}#blog-post.bounds .hljs-attribute,#blog-post.bounds .hljs-name,#blog-post.bounds .hljs-tag{color:navy!important;font-weight:400!important}#blog-post.bounds .hljs-link,#blog-post.bounds .hljs-regexp{color:#009926!important}#blog-post.bounds .hljs-bullet,#blog-post.bounds .hljs-symbol{color:#990073!important}#blog-post.bounds .hljs-built_in,#blog-post.bounds .hljs-builtin-name{color:#0086b3!important}#blog-post.bounds .hljs-meta{color:#999!important;font-weight:700!important}#blog-post.bounds .hljs-deletion{background:#fdd!important}#blog-post.bounds .hljs-addition{background:#dfd!important}#blog-post.bounds .hljs-emphasis{font-style:italic!important}#blog-post.bounds .hljs-strong{font-weight:700!important}@media screen and (min-width:920px){.markdown-body{line-height:1.5!important;font-size:16px!important}}@media screen and (max-width:919px){.markdown-body{line-height:1.4!important;font-size:15px!important}}@media screen and (max-width:539px){.markdown-body{line-height:1.3!important;font-size:14px!important}}</style><meta name="image" content="https://i.imgur.com/VgWRVd8.jpg"><meta name="og:description" property="og:description" content="Vài tháng trước mình vừa nhận một hoá đơn hơn 200$ từ AWS chỉ vì quên cmn tắt 2 cái services demo khi phỏng vấn tìm việc. Quá xót tiền, vậy là 1 con đỗ nghèo khỉ như mình lại tìm đường quay về mặt đất. Một phần cũng vì tò mò những hệ thống on-premise trước giờ họ deploy và public ra như thế nào."><meta name="article:section" property="article:section" content="Self-hosting"><meta name="og:image" content="https://i.imgur.com/VgWRVd8.jpg"><style>:host{display:none}scully-content{display:none}</style><style>.topic-container[_ngcontent-onv-c89]{background-color:#daf2e5;margin-bottom:10px;border:1px solid #f29e03;border-radius:10px;overflow:hidden}.topic-image-container[_ngcontent-onv-c89]{padding:10px;background-color:rgba(255,255,255,.7)}.topic-image-container[_ngcontent-onv-c89] div[_ngcontent-onv-c89]{border-radius:10px}.topic-image[_ngcontent-onv-c89]{width:100%;height:250px;background-repeat:no-repeat;background-size:cover;background-position:center;margin-right:10px}.topic[_ngcontent-onv-c89]{width:calc(100% - 30px);padding:10px 15px;background-color:rgba(255,255,255,.7)}.topic[_ngcontent-onv-c89] .title[_ngcontent-onv-c89]{font-size:18px!important;font-weight:500;line-height:1.3;margin-bottom:10px}.topic[_ngcontent-onv-c89] .tags[_ngcontent-onv-c89]{line-height:1;margin-bottom:5px}.topic[_ngcontent-onv-c89] .tags[_ngcontent-onv-c89] .tag-item[_ngcontent-onv-c89]{display:inline-block;background-color:#0f9d5830;border:1px solid #0f9d5830;margin-right:5px;border-radius:5px;padding:4px;min-width:40px;text-align:center}.topic[_ngcontent-onv-c89] .tags[_ngcontent-onv-c89] a[_ngcontent-onv-c89]{text-decoration:none}.topic[_ngcontent-onv-c89] .tags[_ngcontent-onv-c89] a[_ngcontent-onv-c89]:hover{color:#f29e03!important}.topic[_ngcontent-onv-c89] .description[_ngcontent-onv-c89]{margin-top:5px;margin-bottom:0;text-align:justify}.topic[_ngcontent-onv-c89] .topic-footer[_ngcontent-onv-c89]{margin-top:10px;text-align:right;display:flex}.topic[_ngcontent-onv-c89] .topic-footer[_ngcontent-onv-c89] .date[_ngcontent-onv-c89]{margin-right:auto;font-size:small;color:#00717b!important}.topic[_ngcontent-onv-c89] .topic-footer[_ngcontent-onv-c89] .topic-link[_ngcontent-onv-c89] a[_ngcontent-onv-c89]{color:#00717b!important;margin-right:10px}.topic[_ngcontent-onv-c89] .topic-footer[_ngcontent-onv-c89] .topic-link[_ngcontent-onv-c89] a[_ngcontent-onv-c89]:hover{color:#f29e03!important}</style><script>window.ScullyIO="generated"</script><script>function scrollSection(l){let e=document.getElementById(l);null!=e&&e.scrollIntoView()}</script><script>function loadLazyDisplay(){let e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting?e.target.style.visibility="visible":e.target.style.visibility="hidden"})},{root:null,rootMargin:"0px",threshold:0}),t=document.getElementById("scully-content"),l=[];null!=t&&(l=t.querySelectorAll(":scope > *")),l.forEach(t=>{e.observe(t)})}</script></head><body class="mat-typography" scully-version="1.1.1"><app-root _nghost-onv-c87="" ng-version="11.0.9"><router-outlet _ngcontent-onv-c87=""></router-outlet><app-blog><div id="mainTab"><div><a label="ABOUT ME" href="/?index=0">ABOUT ME</a></div><div><a label="PORTFOLIO" href="/?index=1">PORTFOLIO</a></div><div><a label="AFTER WORK" href="/?index=2">AFTER WORK</a></div></div><div class="container-wrapper"><div class="control-container left-container"><div class="logo"><a href="/?index=2" aria-label="Go to homepage"><img src="assets/icons/favicon-196x196.png" alt="Logo"></a></div><div class="menu-left"><button aria-label="Go to top" class="m-icon top arrow"></button> <button aria-label="Like button" class="m-icon icn-clap shake"></button> <button aria-label="Comment button" class="m-icon icn-comment shake"></button> <button aria-label="Source button" class="m-icon icn-source shake"></button> <button aria-label="Subcribe button" class="m-icon icn-subcribe shake"></button> <button aria-label="Go to bottom" class="m-icon bottom arrow"></button></div><div class="footer"><button aria-label="sendEmail" onclick='window.open("https://mail.google.com/mail/?view=cm&amp;fs=1&amp;to=nhvu.95@gmail.com&amp;su=HOW%20CAN%20I%20HELP%20U%3F")' class="m-icon gmail pointer"></button></div></div><div class="content-container"><div id="blog-post" class="bounds"><div id="inner-bounds" class="inner-bounds"><div class="content"><div class="header-image"><img loading="lazy" alt="Head blog image" src="https://i.imgur.com/VgWRVd8.jpg"></div><div class="post-container"><h1 class="header"><span class="header-sub-wrapper"><span>[TIL]</span> <span>On The Ground</span></span></h1><div class="main-content markdown-body"><div><div><label class="author"><div class="avatar"></div><span><span>Vue Nguyen</span><span class="normal"> in </span><span>Hanoi, Vietnam</span><span class="normal"> • Oct 08, 2022</span></span></label><div class="yellow-line"></div><div id="scully-content" class="s-content"><!--scullyContent-begin--><p><em><strong>Hồi ở công ty cũ, mình cũng hay phải deploy các dự án cho Team dev và cả team Test. Nhưng chủ yếu việc deploy sẽ chỉ xoay quanh ở các local server trong cùng mạng LAN, hoặc nếu không thì sẽ sử dụng các dịch vụ cloud kiểu như Azure Storage, Azure Function, AWS EC2, AWS RDS, Github Page. Thế nên đây là lần đầu tiên mình tự public 1 server, và deploy ở đó.<br>Sau khi dùng thử mình cũng thấy rằng, không chỉ ở trên cloud, ở mặt đất cũng có nhiều cái hay đó chứ , và nếu bạn đang đọc bài viết này, thì nó đang được serve hoàn toàn từ máy tính của mình đó 😁</strong></em></p><p>Mình đã thử với 2 giải pháp. Cái đầu tiên không thực sự thành công nên sau đó mình đã đến với giải pháp thứ 2, và đây cũng là cách mà mình thấy ổn hơn và quyết định sử dụng nó. Thế nên, nếu các bạn không có thời gian rảnh để nghịch mấy cái tào lao và muốn tìm 1 giải pháp tốt và work ngay lập tức, mình recommend giải pháp thứ 2, bạn có thể scroll xuống thẳng <a href="javascript:scrollSection('ii-t%E1%BB%B1-host-v%C3%A0-d%C3%B9ng-cloudflare-%C4%91%E1%BB%83-facing-v%E1%BB%9Bi-internet-th%C3%B4ng-qua-cloudflare-tunnel')"><strong>giải pháp thứ 2</strong></a>.</p><h2 id="i-giải-pháp-1-tự-host-và-tự-facing-internet"><strong>I. Giải pháp 1: Tự host và tự facing internet.</strong></h2><p>Những thứ mình đã làm với giải pháp này sau 1 buổi mò trên internet và 2 buổi tìm solution cho cái rắc rối mà mình gặp phải</p><ol><li><strong>Đầu tiên mình set static IP cho con máy tính của mình &amp; mở port ở trên windows firewall.</strong></li><li><strong>Mở forward port ở trên modem setting (192.168.1.1).</strong></li><li><strong>Cài Docker và chạy Docker/nginx để serve app.</strong></li><li><strong>Setup DDNS từ domain của mình trên Google Domain về máy cá nhân của mình. Tools / Dịch vụ mà mình đã tử là NoIP, DDclient và DDNS Updated Admin.</strong></li><li><strong>Kiểm tra thử và phát hiện lỗi.</strong></li></ol><p>Giải pháp này chạy ổn cho đến khi mình phát hiện ra toàn bộ web app của mình không thể được truy cập từ các thiết bị di động. Sau khi nhờ support từ các bạn senior Dev-Ops trong group <a href="https://www.facebook.com/groups/608821322646056"><strong>DevOps VietNam</strong></a> và kiểm nghiệm cá nhân, mình đã tìm ra lý do, lý do mình sẽ nói chi tiết trong phần hướng dẫn của giải pháp 1 này.</p><h2 id="ii-giải-pháp-2-tự-host-và-dùng-cloudflare-để-facing-với-internet-thông-qua-cloudflare-tunnel"><strong>II. Giải pháp 2: Tự host và dùng Cloudflare để facing với internet thông qua Cloudflare tunnel.</strong></h2><p>Giải pháp này đến với mình sau khi mình đăng câu hỏi lên group <a href="https://www.facebook.com/groups/608821322646056"><strong>DevOps VietNam</strong></a>. Cũng từ gợi ý và giúp đỡ từ một người em (bạn) <a href="https://www.facebook.com/sonpnuet"><strong>Phạm Sơn</strong></a>, và cả comment từ một vài senior ở đây, mình đã hiểu vấn đề và thử cách này.</p><ol><li><strong>Sẵn con Docker và Docker - nginx được cấu hình sẵn từ bước 3 của Giải pháp 1. Mình tiếp tục sử dụng nó</strong></li><li><strong>Cấu hình con domain (Google Domain) của mình sang dùng DNS server của Cloudflare.</strong></li><li><strong>Tạo Application trên cloudflare</strong></li><li><strong>Tạo Tunnel và connect server đến Cloudflare tunnel.</strong></li></ol><p>Mình không ước biết giải pháp này sớm hơn, mình còn thấy may vì nhờ đã thử giải pháp 1 mà mình học được khá nhiều thứ hay ho.</p><hr><h1 id="i-tự-host-và-tự-facing-internet"><strong>I. Tự host và tự facing internet.</strong></h1><p><strong>Chuẩn bị:</strong></p><ul><li>Máy tính</li><li>Quyền truy cập modem</li><li>1 Domain</li></ul><p>Máy tính mình recommend các bạn nên kết nối mạng thông qua cáp LAN, vì kết nối của nó sẽ ổn định hơn qua wifi, và cũng tiện cho việc cấu hình hơn.</p><h2 id="1-set-ip-tĩnh"><strong>1. Set IP Tĩnh</strong></h2><p>Đầu tiên là set IP tĩnh cho con máy đã, IP tĩnh giúp IP không bị thay đổi, và để modem có thể forward port đến máy của chúng ta trong mạng LAN mà không sợ IP bị thay đổi.</p><p>Các bạn ấn <code>Windows + R</code> gõ <code>ncpa.cpl</code> rồi ấn OK Hoặc từ thanh address của windows Explorer gõ <code>Control Panel\All Control Panel Items\Network Connections</code></p><p>Chuột phải vào mạng bạn đang sử dụng, (Ở đây mình dùng mạng lan Ethernet), chọn Properties</p><p>Tiếp đó một dialog sẽ hiện lên, chọn &gt; <code>TCP/IPv4</code> chọn tiếp &gt; <code>Properties</code></p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/oMc7lEf.png"></figure><p>Tiếp tục ấn <code>Windows + R</code> gõ <code>cmd</code> rồi ấn OK/Enter. Nhập <code>ipconfig /all</code>.</p><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> ipconfig /all

Ethernet adapter Ethernet:

   Connection-specific DNS Suffix  <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span>
   Description <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> Intel<span class="token punctuation">(</span>R<span class="token punctuation">)</span> Ethernet Connection <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> I219-V
   Physical Address. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">30</span>-9C-23-68-E4-08
   DHCP Enabled. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> No
   Autoconfiguration Enabled <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> Yes
   IPv6 Address. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">2405</span>:4802:377:6f30:d4e9:c778:f58:6204<span class="token punctuation">(</span>Preferred<span class="token punctuation">)</span>
   IPv6 Address. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">2405</span>:4802:377:6f30:ffff:ffff:ffff:ffed<span class="token punctuation">(</span>Preferred<span class="token punctuation">)</span>
   Lease Obtained. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> Friday, October <span class="token number">7</span>, <span class="token number">2022</span> <span class="token number">8</span>:11:43 AM
   Lease Expires <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> Friday, October <span class="token number">7</span>, <span class="token number">2022</span> <span class="token number">9</span>:30:18 PM
   Temporary IPv6 Address. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">2405</span>:4802:377:6f30:407f:9ea6:98f8:6ffc<span class="token punctuation">(</span>Preferred<span class="token punctuation">)</span>
   Link-local IPv6 Address <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> fe80::d4e9:c778:f58:6204%3<span class="token punctuation">(</span>Preferred<span class="token punctuation">)</span>
   IPv4 Address. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">192.168</span>.1.50<span class="token punctuation">(</span>Preferred<span class="token punctuation">)</span>
   Subnet Mask <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">255.255</span>.255.0
   Default Gateway <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> fe80::7e9f:7ff:fea0:9da8%3
                                       <span class="token number">192.168</span>.1.1
   DHCPv6 IAID <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> <span class="token number">321952803</span>
   DHCPv6 Client DUID. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> 00-01-00-01-23-33-8F-9E-30-9C-23-68-E4-08
   DNS Servers <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> fe80::1%3
                                       <span class="token number">1.1</span>.1.1
                                       <span class="token number">1.0</span>.0.1
   NetBIOS over Tcpip. <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">.</span> <span class="token builtin class-name">:</span> Enabled
</code></pre><p>Kéo lên phần Ethernet đúng với mạng mà bạn đang sử dụng, bạn sẽ thấy <code>Default Gateway</code> là 1 dãy IP có dạng <code>192.168.1.1</code>. IP này có thể sẽ khác ở trên máy của bạn. Nhưng cho dù nó là mịa gì, chỉ cần tăng số cuối lên trong khoảng từ 2-223. Trường hợp này mình để static IP của mình là <code>192.168.1.50</code>.</p><p>Quay trở về dialog lúc nãy điền IP address là IP static mới này, còn Default Gateway và Subnet Mask giống như trong command line</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/hwX1YTs.png"></figure><p>Nếu có người sử dụng IP này rồi thì sao? Yên tâm, nếu có người dùng thì nó sẽ lỗi ngay, hiện warning 😆biết ngay, thay thành IP khác là được.</p><p>Phần DNS server thì mình đang dùng DNS server của Cloudflare, các bạn điền giống thế cũng được. Ưu điểm của cái này là vào được Medium và mấy trang cơ bản bị chặn ở VN.</p><p>&nbsp;</p><h3 id="tiếp-đến-việc-chúng-ta-cần-làm-là-mở-port-windows"><strong>Tiếp đến việc chúng ta cần làm là mở port windows.</strong></h3><p>Ấn phím <code>Windows + S</code> nhập <code>Firewall</code>. Chọn <strong>Windows Defender Firewall with Advanced Security</strong></p><p>Từ tab bên trái chọn <code>Inbound Rules</code> &gt; <code>New Rule</code>. Và tạo mới 1 rule, chọn <code>Port</code> &gt; <code>Next</code></p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/IP33IkF.png"></figure><p>Chọn protocol mà bạn muốn mở, ở đây mình sẽ mở TCP với các cổng lần lượt là 80, 443, 5000-5010. Trong đó 80 là cổng mặc định của windows, Mở thêm 443 để support cho HTTPS, và thêm 5000 để cho Docker.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/8YdCY36.png"></figure><ul><li>Ở bước Action bạn chọn Allow the Connection</li><li>Bước Profile cứ để mặc định</li><li>Bước Name bạn điền tên tuỳ ý. Mình thì để là SelfHostRule cho dễ tìm</li></ul><p>=&gt; <strong>Tiếp đến tạo 1 rule tương tự cho <code>Outbound Rules</code></strong></p><h2 id="2-mở-port-forward-ở-modem"><strong>2. Mở Port Forward ở Modem.</strong></h2><p>Từ Cửa sổ browser, các bạn gõ 192.168.1.1 Đây là IP mặc định để cấu hình modem, Mỗi loại modem sẽ có 1 ip khác nhau. Các bạn có thể tìm thấy nó ở mặt đáy của modem.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/zlTqhP8.png"></figure><p>Thường thì tài khoản và mật khẩu mặc định sẽ là <code>admin / admin</code>. Nhưng đôi khi thì nó đã bị kỹ thuật viên đổi mật khẩu rồi.<br>Nếu là modem của FPT thì mật khẩu thường sẽ là 7 chữ số cuối trong mã hợp đồng internet ( bạn có thể tìm thấy ở trong hoá đơn mạng). Ví dụ Mã hợp đồng là <code>HHNAAP1234</code> thì mật khẩu sẽ là <code>AAP1234</code></p><p>Dù là modem của hãng nào cũng sẽ có phần Security Setup và cũng sẽ có phần Port Forwarding</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/Iu8MJUS.png"></figure><p>Các bạn điền như hình để mở cả TCP/UDP cho Port 80. Ở phần IP address thì bạn điền static IP của bạn. Phần WAN Port của mình vì mình hay dùng những cổng này nên mình mở port range từ 20 đến 80. Nếu không muốn mở range các bạn có thể điền nguyên 80 thôi cũng được</p><p>Làm tương tự, tạo thêm 1 cái với Port 443 để HTTPS có thể hoạt động, và điền nguyên 443 nếu không muốn public các port không dùng đến</p><h2 id="3-cài-docker-và-cấu-hình-dockernginx">3. Cài Docker và cấu hình Docker/Nginx</h2><p>Việc cài Docker thì khá đơn giản rồi, chỉ việc lên <a href="https://www.docker.com/"><strong>trang chủ</strong></a> và tải về thôi.</p><p>Kiểm tra cài đặt docker thành công hay chưa bằng command</p><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> docker --version
~~~~~~~~~~~~~~~~~~~~
Docker version <span class="token number">20.10</span>.17, build 100c701</code></pre><p>Để cài nginx chạy nginx trên docker, ta dùng command</p><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span> docker pull nginx</code></pre><p>Thực ra phần tốn thời gian nhất của mình trong bước này đó chính là cấu hình <code>nginx</code> cho sub domain ( wildcard DNS), tiếp đó là việc cấu hình SSL cho nó.</p><p>Tạo 1 Dockerfile kiểu như thế này</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Dockerfile</span>
<span class="token comment"># STAGE3: Run</span>
FROM nginx:latest
COPY nginx.conf /etc/nginx/nginx.conf
RUN <span class="token function">mkdir</span> /etc/nginx/sites-enabled
COPY ./webrtc/f2f.nhvu95.com.conf /etc/nginx/sites-available/f2f.nhvu95.com
COPY ./webrtc/dist/webrtc /usr/share/nginx/html/f2f.nhvu95.com
COPY ./scully-personal-website/nhvu95.com.conf /etc/nginx/sites-available/nhvu95.com
COPY ./scully-personal-website/dist/static /usr/share/nginx/html/nhvu95.com
RUN <span class="token function">ln</span> -s /etc/nginx/sites-available/nhvu95.com /etc/nginx/sites-enabled/
RUN <span class="token function">ln</span> -s /etc/nginx/sites-available/f2f.nhvu95.com /etc/nginx/sites-enabled/</code></pre><p>Giải thích qua một chút về dockerfile của mình, lúc đầu đây là một dockerfile multi-stage. Lúc đầu mình sẽ có</p><ul><li>STAGE1: build domain nhvu95.com</li><li>STAGE2: build sub domain f2f.nhvu95.com</li><li>STAGE3: initialize nginx</li></ul><p>Nhưng sau mình nhận ra là việc dùng multi-stage để build code (STAGE1 / STAGE2) trong code sẽ tốn rất nhiều RAM, hoặc nói đúng hơn là nó chiếm RAM cho Docker và sau đó không giải phóng đi 😥 Mở Task Manager lên lúc nào <code>Vmmem</code> cũng toàn <code>~16Gb</code>.<br>Và khi mình thay đổi ở project của sub domain, mình cũng phải thay đổi cả project của domain chính. Chết tiệt. Thế nên giờ Dockerfile chỉ còn lại stage 3 này.</p><p>Đây là cấu trúc project của mình với Dockerfile này</p><pre class="language-bash"><code class="language-bash"><span class="token operator">&gt;</span>   - Dockerfile 
    - nginx.conf    <span class="token comment"># nginx root config</span>
    - certbot/nhvu95.com/* <span class="token comment"># Folder store SSL certification</span>
    - scully-personal-website
        - nhvu95.com.conf <span class="token comment"># nhvu95.com nginx configuration file</span>
        - dist/static/    <span class="token comment"># nhvu95.com build folder</span>
    - webrtc 
        - f2f.nhvu95.com.conf   <span class="token comment"># f2f.nhvu95.com nginx configuration file</span>
        - dist/webrtc           <span class="token comment"># f2f.nhvu95.com build folder</span></code></pre><p>Các bạn có thể thấy là<code>Dockerfile, nginx.conf</code> và thư mục <code>certbot/nhvu95.com/*</code> sẽ nằm ở root, đây cũng sẽ là nơi chúng ta sẽ gọi command để build và chạy Docker</p><pre class="language-bash"><code class="language-bash"><span class="token comment">#nginx.conf</span>
events<span class="token punctuation">{</span><span class="token punctuation">}</span>
http <span class="token punctuation">{</span>
    include /etc/nginx/mime.types<span class="token punctuation">;</span>
    include /etc/nginx/sites-enabled/*<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment">#nhvu95.com.conf</span>
server <span class="token punctuation">{</span>
    listen <span class="token number">80</span> default_server<span class="token punctuation">;</span>
    listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80 default_server <span class="token punctuation">;</span>

    listen <span class="token number">443</span> ssl default_server<span class="token punctuation">;</span>
    listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:443 ssl default_server<span class="token punctuation">;</span>
    ssl_certificate     cert/fullchain.pem<span class="token punctuation">;</span>
    ssl_certificate_key cert/privkey.pem<span class="token punctuation">;</span>

    root /usr/share/nginx/html/nhvu95.com<span class="token punctuation">;</span>
    index index.html<span class="token punctuation">;</span>
    server_name nhvu95.com www.nhvu95.com<span class="token punctuation">;</span>
    location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment">#f2f.nhvu95.com.conf</span>
server <span class="token punctuation">{</span>
    listen <span class="token number">80</span><span class="token punctuation">;</span>
    listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:80<span class="token punctuation">;</span>

    listen <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    listen <span class="token punctuation">[</span>::<span class="token punctuation">]</span>:443 ssl<span class="token punctuation">;</span>
    ssl_certificate     cert/fullchain.pem<span class="token punctuation">;</span>
    ssl_certificate_key cert/privkey.pem<span class="token punctuation">;</span>

    root /usr/share/nginx/html/f2f.nhvu95.com<span class="token punctuation">;</span>
    index index.html<span class="token punctuation">;</span>
    server_name f2f.nhvu95.com www.f2f.nhvu95.com<span class="token punctuation">;</span>
    location / <span class="token punctuation">{</span>
        try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>Như các bạn có thể thấy thì ở đây còn có <code>fullchain.pem; privkey.pem;</code>. Đây chính là các chứng chỉ SSL được generate ra từ <a href="https://certbot.eff.org/instructions?ws=other&amp;os=windows"><strong>Certbot</strong></a> với command:</p><pre class="language-bash"><code class="language-bash">certbot certonly --standalone -d nhvu95.com,f2f.nhvu95.com,soundmemos.nhvu95.com,api.nhvu95.com --expand</code></pre><p>Từ khoá expand ở đây dùng trong trường hợp bạn đã có cert cho <code>nhvu95.com</code> và muốn "expand" nó ra để dùng cho cả <code>f2f.nhvu95.com</code>.</p><p>Nếu không có gì thay đổi thì certbot sẽ tự động lưu SSL cert cho bạn ở <code>C:\Certbot\live</code>. Copy chúng nó về và dùng thôi.</p><p>Mở thư mục chứa Dockerfile (thư mục root bên trên), chuột phải, chọn <code>powershell</code> và chạy command dưới đây để build Docker image, nhớ giữ dấu chấm cuối command</p><pre class="language-bash"><code class="language-bash">docker build -t <span class="token operator">&lt;</span>image_name<span class="token operator">&gt;</span> <span class="token builtin class-name">.</span>

<span class="token comment">#ex: docker build -t self-host-image .</span></code></pre><p>Để chạy docker, bạn sử dụng 2 comman sau. Command thứ nhất để tạo một network, sau này chúng ta sẽ dùng chung nó với <code>Cloudflare tunnel</code> ở giải pháp thứ 2</p><pre class="language-bash"><code class="language-bash">docker network create tunnel

docker run --detach --restart unless-stopped --network tunnel --name <span class="token operator">&lt;</span>container_name<span class="token operator">&gt;</span> -v <span class="token variable">${<span class="token environment constant">PWD</span>}</span>/certbot/nhvu95.com:/etc/nginx/cert -p <span class="token number">80</span>:80 -p <span class="token number">443</span>:443 <span class="token operator">&lt;</span>image_name<span class="token operator">&gt;</span>

<span class="token comment">#ex: docker run  --detach --restart unless-stopped --network tunnel --name self-host-container -v ${PWD}/certbot/nhvu95.com:/etc/nginx/cert -p 80:80 -p 443:443 self-host-image</span></code></pre><p>Sau bước này, nếu mọi thứ OK thì bạn đã có thể mở website bằng <code>http://localhost/</code> rồi đó. Nếu đen, windows mặc định sẽ có 1 services sử dụng port 80 này và lúc này thứ browser hiện ra không phải trang web của bạn. Việc bạn cần làm là tắt cái windows services đó đi, yên tâm, không ảnh hưởng gì cả.</p><p><code>Windows + S</code> &gt; gõ <code>services</code> &gt; Tìm cái services này, chuột phải vào properties và tắt nó đi</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/3iMouWf.png"></figure><p>==&gt; Lúc này <code>http://localhost/</code> của bạn sẽ vào bình thường</p><p>Và cộng với việc public port ở các bước trước, lúc này bạn đã có thể truy cập thông qua public ipv6. Bạn có thể lấy public IPv6 ở <a href="https://whatismyipaddress.com/"><strong>đây</strong></a>.<br>Bạn có thể dùng IPv6 để truy cập website bằng địa chỉ như sau, nhớ giữ 2 dấu <strong>[</strong> <strong>]</strong> ở trên URL thì mới hoạt động được</p><blockquote><p>https://[2405:4802:377:6f30:xxx:94fe:xxxx:50b5]/</p></blockquote><p>Tiếc là Public IPv4 của bạn lấy được ở các trang web online thường sẽ không hoạt động. Cái mà họ trả về thường sẽ là public IPv4 của ISP(các nhà cung cấp dịch vụ mạng) chứ không phải Public IPv4 máy tính của bạn.<br>Mở modem setting lên, vào phần WAN Status, WAN Ipv4 ở đây mới đúng là public IPv4 của bạn, và nếu bạn thử với IpV4 này thì nó sẽ hoạt động.</p><blockquote><p><a href="http://21.xxx.xxx.100/">http://21.xxx.xxx.100/</a></p></blockquote><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/osMLL94.png"></figure><h2 id="4-setup-ddns"><strong>4. Setup DDNS</strong></h2><p>Như bình thường, nếu chúng ta dùng Domain với Record Type là <code>A/AAAA</code> và trỏ thẳng đến public <code>IPv4/IPv6</code> thì website của chúng ta sẽ hoạt động. Hửm, nhưng chuyện gì sẽ xảy ra nếu mất điện? hoặc giả server bị reset và IP của chúng ta bị thay đổi?</p><p>Có những dịch vụ kiểu như <code>No-IP</code> sẽ support việc này, hoặc chúng ta có thể dùng các tool như <code>ddclient</code>, <code>dydns</code> hoặc <code>DDNS Updater Admin</code>. Về bản chất của chúng nó là giống nhau, đều là các tool cài trên server, khi phát hiện public IP thay đổi thì thông báo cho DNS server qua API hoặc socket.<br>Mình kiểm tra thử thì <code>No-IP</code> mất phí, <code>ddclient</code> và <code>dydns</code> thì chạy quá là sida trên docker. Cuối cùng mình quyết định dùng <code>DDNS Updater Admin</code> vì nó free và ổn định.</p><p>Đầu tiên mình sẽ cố gắng setup domain trông giống như thế này.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/qoSu7DL.png"></figure><p>Khi tạo DDNS họ sẽ cho mình account và key để update IP</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/Z1jmxhd.png"> <img loading="lazy" src="https://i.imgur.com/rVESLTd.png"></figure><p>Tải <a href="https://ddnsupdater.videocoding.org/download.html"><strong>"DDNS Updater Admin</strong>"</a> về mở lên. Điền URL dưới đây, thay bằng domain của bạn, và account password của bạn</p><pre class="language-bash"><code class="language-bash">https://domains.google.com/nic/update?hostname<span class="token operator">=</span>nhvu95.com<span class="token operator">&amp;</span><span class="token assign-left variable">myip</span><span class="token operator">=</span>%IP%</code></pre><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/BItUqPZ.png"></figure><p>Bản thân thằng <code>**DDNS Updater Admin**</code> này cũng check IP của bạn theo thời gian từ các nguồn web online như:</p><ul><li>http://[icanhazip.com]/</li><li>http://[<a href="http://www.trackip.net%5D/ip">www.trackip.net]/ip</a></li><li>http://[ip.appspot.com]/<br>...</li></ul><p>Mình không điền cái IPv4 update URL vì như đã nói ở trên, Public IPv4 lấy về toàn sai, vì vậy mình chỉ dùng duy nhất IPv6.</p><p>Sau khi Save, Apply bạn reload lại trang Google Domain, thấy domain đã được cập nhật IPv6 giống hình của mình thì là thành công.</p><p><strong><em>Từ giờ phút này bạn đã có thể truy cập trang web bằng domain của bạn</em></strong></p><h2 id="5-kiểm-tra-thử-và-phát-hiện-lỗi"><strong>5. Kiểm tra thử và phát hiện lỗi.</strong></h2><p>Mọi thứ hoạt động rất ổn cho đến khi mình phát hiện ra mình không thể truy cập website của mình bằng 4G trên điện thoại.<br>Điện thoại nếu kết nối wifi thì vào được, hoặc nếu dùng 4G và bật VPN (Warp 1111) thì vào ngon lành, nhưng tắt đi thì chịu.<br>Chẳng nhẽ trang web của mình đã bị đối xử như po*nhub 😞. Mình còn đã kiểm tra domain của mình (nhvu95.com) có khi nào có chữ "vu" bị hiểu nhầm thành chữ "v.ú" không cơ 😁. Rất may qua comment của các anh em đã giải thích cho mình</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/Bqmeqgy.png"></figure><p>Mình kiểm tra thì đúng thế thật :O, Hơn nữa IPv4 lấy được còn là IPv4 của ISP Viettel, Đây có lẽ chính là lý do mà dù ở phía server mình có trỏ DDNS đến WAN IPv4 (Cái trong modem setting) của mình thì điện thoại cũng không kết nối được. Tuy nhiên khi dùng Wifi hoặc VPN thì IPv6 và IPv4 của điện thoại đều được cấp bình thường 😁. Kiến thức mới này đã được tiếp thu 😀.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/q3fgRqh.jpg"></figure>_______________<h1 id="ii-tự-host-và-dùng-cloudflare-để-facing-với-internet-thông-qua-cloudflare-tunnel">II. <strong>Tự host và dùng Cloudflare để facing với internet thông qua Cloudflare tunnel.</strong></h1><p>Thay vì public port và rồi cấu hình DDNS một đống thứ từa lưa khác giống như cách 1, thì đại khái đây sẽ là cách mà chúng ta làm lại. Cloudflare sẽ giúp chúng ta xử lý vụ định tuyến, IP các thứ loằng ngoằng bên trên, chúng ta chỉ cần cấu hình <code>Cloudflare tunnel</code> trỏ đến server của chúng ta là được.</p><p>Sau khi có được keyword về <code>Cloudflare tunnel</code> và tìm hiểu nó, mình thấy nó khá giống với <code>ngrok</code> một trong những thứ mình từng dùng ngày trước. <code>Ngrok</code> cũng cho phép publich localhost nhưng sẽ phải sử dụng domain của <code>ngrok</code>.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/QEKfpK1.png"></figure><p>Trên hình thì sẽ có các services của cloudflare, nhưng thực ra thì nếu chỉ self-host không thôi thì không cần dùng đến các thứ đó.<br>Những thứ bạn cần chuẩn bị cho giải pháp này</p><ul><li>Domain</li><li>Cloudflare account</li><li>Server có kết nối mạng</li></ul><h2 id="1-con-docker-và-nginx-cấu-hình-tương-tự-như-giải-pháp-1">1. Con Docker và Nginx cấu hình tương tự như giải pháp 1</h2><p>Chúng ta cứ giữ nguyên phần này</p><h2 id="2-cấu-hình-con-domain-google-domain-của-mình-sang-dùng-dns-server-của-cloudflare">2. Cấu hình con domain (Google Domain) của mình sang dùng DNS server của Cloudflare.</h2><p>Việc đăng ký account Cloudflare rất dễ rồi, các bạn tự mò.</p><p>Sau khi login Cloudflare sẽ điều hướng chúng ta đến một trang quản trị. Việc chúng ta cần làm đầu tiên là trỏ Domain của chúng ta đến Clouldflare đã.</p><p>Chọn <code>Websites &gt; Add a Site</code> và điền domain của bạn vào đây, rồi sau đó ấn Next. VD: nhvu95.com.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/Aq1DcKa.png"></figure><p>Sẽ có 4 plan để cho chúng ta chọn, ở đây nhu cầu của mình chỉ dùng đến Free plan, nên mình chọn free plan. Nếu có nhu cầu chọn những plan mất phí, bạn cần phải add thêm thẻ visa/mastercard trước khi tiếp tục (<code>Billing &gt; Payment Info</code>), còn nếu bạn không có nhu cầu, chúng ta có thể tiếp tục qua bước tiếp theo.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/2tcWPoh.png"></figure><ol><li>Chọn &gt; <code>Continue</code></li></ol><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/XSuYcMW.png"></figure><ol start="2"><li>Một dialog hiện lên để confirm về việc Add records later, chọn &gt; <code>Confirm</code></li><li>Copy 2 cloudflare name server ở màn hình tiếp theo và paste ra notepad hoặc chỗ nào đó để dùng sau này.</li></ol><pre><code>xxxx<span class="token punctuation">.</span>ns<span class="token punctuation">.</span>cloudflare<span class="token punctuation">.</span>com
xxxx<span class="token punctuation">.</span>ns<span class="token punctuation">.</span>cloudflare<span class="token punctuation">.</span>com</code></pre><ol start="4"><li>Màn hình tiếp theo sẽ đưa các bạn đến 1 cái quicks-start guide. Ở đây sẽ có các tuỳ chọn cho phép bạn tối ưu security hay performance cho domain của mình. Ví dụ như:</li></ol><ul><li>Rewrite lại HTTPS, nếu bạn bật cái này thì bạn không cần generate SSL cert từ Certbot nữa cũng được ( Chắc vậy 😁 mình cũng chưa thử).</li><li>Hoặc tuỳ chọn luôn luôn sử dụng HTTPS</li><li>Tuỳ chọn auto minify JS, CSS, HTML. Hoặc nén Brotli để load trang nhanh hơn</li></ul><p>Túm lại là muốn dùng cái nào thì cấu hình cái đó, tuỳ mỗi người.</p><p>Bấm chọn &gt; <code>Finish</code></p><ol start="5"><li>Lúc này Cloudflare sẽ đưa bạn đến một màn hình Overview. Tạm kệ nó ở đó đã. Việc chúng ta cần làm lúc này là mở tab khác và về trang quản lý domain.</li></ol><p>Bất kì platform bán domain nào cũng sẽ có chỗ để cấu hình DNS Server, dù là Google Domain, Name cheap, Godady...<br>Mở phần đó lên và điền 2 DNS server đã copy trước đó vào, rồi &gt; <code>Lưu</code>.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/b2PbGXI.png"></figure><p>Sẽ mất 1 lúc để domain có thể hoạt động, các bạn quay về tab &gt; <code>Websites</code> của Cloudflare và thấy domain đã được tích xanh thì có nghĩa là đã thành công.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/j3UXVab.png"></figure><p>Vậy là đã xong bước cấu hình domain.</p><h2 id="3-tạo-application-trên-cloudflare"><strong>3. Tạo Application trên cloudflare</strong></h2><p>Từ thanh công cụ Của Clouldflare, chọn &gt; <code>Zero Trust</code>. Cloudflare sẽ đưa bạn đến Dashboard của Cloudflare Zero Trust.</p><p>Tại đây, chúng ta chọn <code>Access</code> &gt; <code>Application</code> &gt; <code>Add an application</code> &gt; <code>Self-hosted</code>.</p><p><strong>&gt; Configure App</strong> - Config domain, path và tên app</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/gwlHpsW.png"></figure><p><strong>&gt; Add policies</strong> - Config policies để truy cập app</p><ul><li>Nếu muốn public để tất cả mọi người có thể truy cập, bạn nên chọn <code>Action</code> là <code>Bypass</code> và ở phần <code>Includes</code> để là <code>Everyone</code>. Còn nếu muốn giới hạn những người có thể truy cập, vd theo email, ip, location thì bạn có thể tuỳ chỉnh, khi đó muốn xem được trang của bạn bắt buộc user phải đăng nhập thông qua 1 page login của cloudflare gọi là Cloudflare Access trông như thế này.</li></ul><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/nwDVja1.png" alt="JS components"></figure><p><strong>&gt; CORS settings</strong> - CORS, Cookie, etc</p><ul><li>Ở bước này sẽ cho phép bạn bật tắt CORS, filter các resful method như GET, PUT, POST ..etc</li><li>Và ở đây cũng có tuỳ chọn khác về Cookie..</li></ul><p>Chọn &gt; <code>Add application</code> Để tạo 1 application</p><h2 id="4-tạo-tunnel-và-connect-server-đến-cloudflare-tunnel"><strong>4. Tạo Tunnel và connect server đến Cloudflare tunnel</strong></h2><p>Từ Zero Trust Dashboard, chọn <code>Access</code> &gt; <code>Tunnels</code> &gt; <code>Create a tunnel</code>.</p><ul><li>Đền tên tunnel &gt; <code>Save tunnel</code></li></ul><p>Ở bước <code>&gt; Install connector</code>, tuỳ thuộc vào hệ điều hành mà server sử dụng sẽ có cách cài đặt khác nhau. Nhìn chung mấy thằng kia không có gì khó. Docker thì hơi dị chút vì phải cấu hình network.</p><p>Mình dùng Docker - Nginx để serve website nên mình cũng dùng luôn docker tunnel cho tiện quản lý.</p><p>&gt; Chọn <code>Docker</code> &gt; Copy command</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/YOrBrXG.png" alt="JS components"></figure><p>sửa một chút cho command trông giống như sau và chạy</p><pre><code>docker run <span class="token operator">--</span>detach <span class="token operator">--</span>restart unless<span class="token operator">-</span>stopped <span class="token operator">--</span>network tunnel cloudflare<span class="token operator">/</span>cloudflared<span class="token operator">:</span>latest tunnel <span class="token operator">--</span>no<span class="token operator">-</span>autoupdate run <span class="token operator">--</span>token eyJhIjoiZDxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code></pre><p>Nếu kết nối đến tunnel thành công, IP và connector ID sẽ xuất hiện ở phần <code>Connectors</code> phía dưới khung cửa sổ. Ấn &gt; <code>Next</code></p><p>Tại bước cấu hình &gt; <strong>Route tunnel</strong>, bạn chọn domain kết nối đến tunnel này Riêng về phần services: bạn điền <a href="http://localhost/">http://localhost/</a>. Nếu bạn serve trên docker thì hơi khác 1 chút, bạn phải để là static local IP của bạn thì nó mới ăn <a href="http://192.168.1.50:80">http://192.168.1.50:80</a>.<br>Đây có lẽ là vấn đề của Cocker/cloudflare tunnel. Mình mất gần 1 buổi mới tìm ra cách xử lý 😞</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/ZQYJAdH.png" alt="JS components"></figure><p>Nếu có nhiều sub domain, bạn cứ save nó lại trước đã rồi quay trở về màn hình List <code>tunnels</code> &gt; chọn <code>Configure</code>.</p><p>Ở tab Public Hostname, bạn add thêm public hostname cho sub domain</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/MMuM4HT.png" alt="JS components"></figure><p>Khi tạo tunnel thành công. Bạn quay trở về Cloudflare Dashboard, chọn domain vừa cấu hình.</p><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/qX1ErOH.png" alt="JS components"></figure><figure align="center" width="100%"><img loading="lazy" src="https://i.imgur.com/SSTP5d0.png" alt="JS components"></figure><p>Lúc này những DNS Records mới sẽ được tự động tạo ra cho domain của bạn để kết nối đến Tunnel, riêng 2 record <code>_domainconnect</code> và <code>_dmarc</code> giống như trên hình, nếu như chúng không có thì bạn chỉ cần tự tạo thêm là được.</p><p>Và Yes. Đến lúc này thì toàn bạn đã có thể hoàn toàn truy cập website của mình rồi đó.</p><p>Chúc các bạn thành công.</p><p><a href="https://nhvu95.com/">https://nhvu95.com/</a><br><a href="https://f2f.nhvu95.com/#/">https://f2f.nhvu95.com/#/</a></p><hr><p><strong>Note riêng cho Angular/Scully:</strong> Sau khi sử dụng Scully - angular host trên nginx cùng với cloudflare, Thì thằng Optimization của Cloudflare nó sẽ làm hỏng kiến trúc của Scully. Issue về nó mình cũng đã tìm thấy ở đây: <a href="https://github.com/scullyio/scully/issues/131">https://github.com/scullyio/scully/issues/131</a></p><p><strong>Giải pháp 1:</strong> <code>Website</code> &gt; <code>&lt;domain_name&gt;</code> &gt; <code>Caching</code>&gt; <code>Configuration</code> &gt; Và bật chế độ Dev mode của nó lên là được. Tuy nhiên CDN sẽ không cache nữa, sẽ làm tăng thời gian load static html.<br><strong>Giải pháp 2:</strong> <code>Website</code> &gt; <code>&lt;domain_name&gt;</code> &gt; <code>Speed</code>&gt; <code>Optimization</code> &gt; <code>Auto Minify</code> và bỏ chọn minify của HTML đi là được</p><!--scullyContent-end--><scully-content></scully-content><script>try{window.scullyContent={cssId:"undefined",html:document.body.innerHTML.split("\x3c!--scullyContent-begin--\x3e")[1].split("\x3c!--scullyContent-end--\x3e")[0]}}catch(n){console.error("scully could not parse content")}</script></div><div class="post-thank">Thank for reading!</div></div><div></div></div></div></div></div></div><div class="suggest-share-container right-container" id="rightContainerInner"><div class="share-container"><label aria-label="Share" class="sharetitle">Share to</label><div class="menu"><button aria-label="Share facebook button" class="share-btn"><div class="icn-facebook-share"></div></button> <button aria-label="Share linkedin button" class="share-btn"><div class="icn-linkedin-share"></div></button> <button aria-label="Share twitter button" class="share-btn"><div class="icn-twitter-share"></div></button></div><label class="share-des"><i>Actually, I'm writing this article not to share knowledge, mainly to make notes for myself. However, If you think this can help others, please help me to share it.<br>Thank you !!!</i></label></div><div class="suggest-container"><div class="suggest-items"><label class="stitle">Related</label><app-afterwork-item _nghost-onv-c89=""></app-afterwork-item><app-afterwork-item _nghost-onv-c89=""><div _ngcontent-onv-c89="" class="topic-container"><div _ngcontent-onv-c89="" class="topic-image-container"><div _ngcontent-onv-c89="" class="topic-image" style="background-image:url(&quot;https://i.imgur.com/yDaMrZV.png&quot;)"></div></div><div _ngcontent-onv-c89="" class="topic"><div _ngcontent-onv-c89="" class="tags"><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Self-hosting</a></label><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Docker</a></label><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Vietnamese</a></label></div><h3 _ngcontent-onv-c89="" class="title">[TIL] On The Ground</h3><p _ngcontent-onv-c89="" class="description">Vài tháng trước mình vừa nhận một hoá đơn hơn 200$ từ AWS chỉ vì quên cmn tắt 2 cái services demo khi phỏng vấn tìm việc. Quá xót tiền, vậy là 1 con đỗ nghèo khỉ như mình lại tìm đường quay về mặt đất. Một phần cũng vì tò mò những hệ thống on-premise trước giờ họ deploy và public ra như thế nào.</p><div _ngcontent-onv-c89="" class="topic-footer"><div _ngcontent-onv-c89="" class="date">2022/10/08</div><div _ngcontent-onv-c89="" class="topic-link"><a _ngcontent-onv-c89="" href="/blog/on-the-ground">Read more</a></div></div></div></div></app-afterwork-item></div><div class="recommended"><label class="rtitle">Recommended topics</label><div class="tags"><label class="tag-item"><a href="#">#SumUp</a></label> <label class="tag-item"><a href="#">#Algorithm</a></label> <label class="tag-item"><a href="#">#DynamicProgramming</a></label> <label class="tag-item"><a href="#">#Self-hosting</a></label> <label class="tag-item"><a href="#">#Docker</a></label> <label class="tag-item"><a href="#">#Vietnamese</a></label> <label class="tag-item"><a href="#">#Practice</a></label> <label class="tag-item"><a href="#">#Frontend</a></label> <label class="tag-item"><a href="#">#Interview</a></label> <label class="tag-item"><a href="#">#SEO</a></label></div><label class="rtitle">Recommended series</label><div class="tags"><label class="tag-item"><a href="#">TIL</a></label> <label class="tag-item"><a href="#">Did-I-Miss</a></label> <label class="tag-item"><a href="#">Tips</a></label> <label class="tag-item"><a href="#">Algo-ex</a></label></div></div></div></div></div><div class="suggest-share-container right-container" id="rightContainerOutter"><div class="share-container"><label aria-label="Share" class="sharetitle">Share to</label><div class="menu"><button aria-label="Share facebook button" class="share-btn"><div class="icn-facebook-share"></div></button> <button aria-label="Share linkedin button" class="share-btn"><div class="icn-linkedin-share"></div></button> <button aria-label="Share twitter button" class="share-btn"><div class="icn-twitter-share"></div></button></div><label class="share-des"><i>Actually, I'm writing this article not to share knowledge, mainly to make notes for myself. However, If you think this can help others, please help me to share it.<br>Thank you !!!</i></label></div><div class="suggest-container"><div class="suggest-items"><label class="stitle">Related</label><app-afterwork-item _nghost-onv-c89=""></app-afterwork-item><app-afterwork-item _nghost-onv-c89=""><div _ngcontent-onv-c89="" class="topic-container"><div _ngcontent-onv-c89="" class="topic-image-container"><div _ngcontent-onv-c89="" class="topic-image" style="background-image:url(&quot;https://i.imgur.com/yDaMrZV.png&quot;)"></div></div><div _ngcontent-onv-c89="" class="topic"><div _ngcontent-onv-c89="" class="tags"><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Self-hosting</a></label><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Docker</a></label><label _ngcontent-onv-c89="" class="tag-item"><a _ngcontent-onv-c89="" href="#">#Vietnamese</a></label></div><h3 _ngcontent-onv-c89="" class="title">[TIL] On The Ground</h3><p _ngcontent-onv-c89="" class="description">Vài tháng trước mình vừa nhận một hoá đơn hơn 200$ từ AWS chỉ vì quên cmn tắt 2 cái services demo khi phỏng vấn tìm việc. Quá xót tiền, vậy là 1 con đỗ nghèo khỉ như mình lại tìm đường quay về mặt đất. Một phần cũng vì tò mò những hệ thống on-premise trước giờ họ deploy và public ra như thế nào.</p><div _ngcontent-onv-c89="" class="topic-footer"><div _ngcontent-onv-c89="" class="date">2022/10/08</div><div _ngcontent-onv-c89="" class="topic-link"><a _ngcontent-onv-c89="" href="/blog/on-the-ground">Read more</a></div></div></div></div></app-afterwork-item></div><div class="recommended"><label class="rtitle">Recommended topics</label><div class="tags"><label class="tag-item"><a href="#">#SumUp</a></label> <label class="tag-item"><a href="#">#Algorithm</a></label> <label class="tag-item"><a href="#">#DynamicProgramming</a></label> <label class="tag-item"><a href="#">#Self-hosting</a></label> <label class="tag-item"><a href="#">#Docker</a></label> <label class="tag-item"><a href="#">#Vietnamese</a></label> <label class="tag-item"><a href="#">#Practice</a></label> <label class="tag-item"><a href="#">#Frontend</a></label> <label class="tag-item"><a href="#">#Interview</a></label> <label class="tag-item"><a href="#">#SEO</a></label></div><label class="rtitle">Recommended series</label><div class="tags"><label class="tag-item"><a href="#">TIL</a></label> <label class="tag-item"><a href="#">Did-I-Miss</a></label> <label class="tag-item"><a href="#">Tips</a></label> <label class="tag-item"><a href="#">Algo-ex</a></label></div></div></div></div></div></div></app-blog></app-root><noscript>Please enable JavaScript to continue using this application.</noscript><script id="ScullyIO-transfer-state"></script><script src="runtime.7de874308ed22aea065b.js" defer></script><script src="polyfills.b13e191c52f7e9d4f975.js" defer></script><script src="main.9b5e47b4d5e388fba165.js" defer></script></body></html>